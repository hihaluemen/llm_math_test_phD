# 大模型基础加法能力测试数据集

## 数据集概述

本数据集旨在测试当前云端API大模型（如GPT-4、Claude、Gemini等）的基础加法能力，探究它们是依赖规则学习还是模式记忆，重点考察交换律和对符号表示的泛化能力。

数据集生成时间：2025年4月24日

## 数据集规模与结构

- **总测试用例数**：8,000个
- **唯一数字对数**：2,000对
- **文件格式**：JSONL（每行一个JSON对象）
- **文件路径**：`/Users/lhh/Desktop/llm/learn/test_llm/0424/addition_dataset.jsonl`

## 数据分布

### 类型分布

| 类型 | 测试用例数 | 百分比 |
|------|------------|--------|
| 数值类型 | 4,000 | 50% |
| 符号类型 | 4,000 | 50% |

### 顺序分布

| 顺序 | 测试用例数 | 百分比 |
|------|------------|--------|
| A+B | 4,000 | 50% |
| B+A | 4,000 | 50% |

### 数字位数分布

#### 位数范围统计

| 位数范围 | 数字数量 | 百分比 |
|----------|----------|--------|
| 小数字(1-3位) | 2,400 | 30% |
| 中等数字(4-10位) | 3,200 | 40% |
| 大数字(11-25位) | 2,400 | 30% |

#### 详细位数分布

| 位数 | 数字数量 |
|------|----------|
| 1 | 820 |
| 2 | 828 |
| 3 | 752 |
| 4 | 432 |
| 5 | 460 |
| 6 | 480 |
| 7 | 496 |
| 8 | 432 |
| 9 | 438 |
| 10 | 462 |
| 11 | 198 |
| 12 | 148 |
| 13 | 138 |
| 14 | 174 |
| 15 | 162 |
| 16 | 158 |
| 17 | 134 |
| 18 | 162 |
| 19 | 182 |
| 20 | 142 |
| 21 | 146 |
| 22 | 158 |
| 23 | 166 |
| 24 | 164 |
| 25 | 168 |

### 符号映射分布

| 符号映射类型 | 测试用例数 | 百分比 |
|--------------|------------|--------|
| 字母映射 (letter_map) | 1,334 | 33.35% |
| 特殊字符映射 (special_char_map) | 1,298 | 32.45% |
| 论文示例映射 (paper_example_map) | 1,368 | 34.20% |

## 符号映射定义

数据集使用了三种不同的符号映射规则：

### 字母映射 (letter_map)
```
{
  '0': 'Z', '1': 'Y', '2': 'X', '3': 'W', 
  '4': 'V', '5': 'U', '6': 'T', '7': 'S', 
  '8': 'R', '9': 'Q'
}
```

### 特殊字符映射 (special_char_map)
```
{
  '0': '@', '1': '#', '2': '$', '3': '%', 
  '4': '^', '5': '&', '6': '*', '7': '(', 
  '8': ')', '9': '!'
}
```

### 论文示例映射 (paper_example_map)
```
{
  '0': 'u', '1': 'd', '2': 'a', '3': 'i', 
  '4': 'h', '5': 'v', '6': 'e', '7': 'y', 
  '8': 'r', '9': 'c'
}
```

## 测试用例示例

### 数值测试用例示例
```json
{
  "case_id": "pair0001_num_AB",
  "pair_id": "pair0001",
  "type": "numerical",
  "order": "A+B",
  "operand1": "1364",
  "operand2": "2638",
  "question": "1364 + 2638 = ?",
  "correct_answer": "4002",
  "digit_length_A": 4,
  "digit_length_B": 4,
  "symbolic_mapping_id": null,
  "symbolic_mapping_definition": null
}
```

### 符号测试用例示例
```json
{
  "case_id": "pair0001_sym_AB_paper_example_map",
  "pair_id": "pair0001",
  "type": "symbolic",
  "order": "A+B",
  "operand1": "dieh",
  "operand2": "aeir",
  "question": "dieh + aeir = ?",
  "correct_answer": "huua",
  "digit_length_A": 4,
  "digit_length_B": 4,
  "symbolic_mapping_id": "paper_example_map",
  "symbolic_mapping_definition": "{'0': 'u', '1': 'd', '2': 'a', '3': 'i', '4': 'h', '5': 'v', '6': 'e', '7': 'y', '8': 'r', '9': 'c'}"
}
```

## 使用方法

1. 使用`evaluate_llm_addition.py`脚本评估大模型的加法能力：
```bash
python evaluate_llm_addition.py --dataset /Users/lhh/Desktop/llm/learn/test_llm/0424/addition_dataset.jsonl --model 模型名称 --api_key API密钥 --output_dir 输出目录
```

2. 支持的模型类型：
   - OpenAI的GPT系列模型（如gpt-4）
   - Anthropic的Claude系列模型（如claude-3-opus）
   - Google的Gemini系列模型（如gemini-pro）

3. 评估结果将包括：
   - 总体准确率
   - 按类型（数值/符号）的准确率
   - 按顺序（A+B/B+A）的准确率
   - 按位数范围的准确率
   - 非对称失败率（一个方向对，另一个方向错）
   - 可视化图表

## 数据集生成方法

数据集使用`generate_addition_dataset.py`脚本生成，该脚本：
1. 随机生成指定位数范围的数字对
2. 计算正确的加法结果
3. 创建数值和符号形式的测试用例
4. 应用不同的符号映射规则
5. 输出JSONL格式的数据集和统计信息

生成参数：
- 总数对数：2,000对
- 小数字范围：1-3位（30%）
- 中等数字范围：4-10位（40%）
- 大数字范围：11-25位（30%）
